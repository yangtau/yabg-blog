---
title: "Go 语言中的优雅关闭"
author: τ
date: 2022-10-29
---

优雅关闭（Graceful Shutdown）就是说优雅地关闭。既然有优雅的关闭，那就有不优雅的。例如电脑关机的时候，写到一半的文档没有保存。再开机时，辛苦写的文档就剩个标题了，这就很不优雅。在程序中，优雅关闭可能有很多内涵：占用的系统资源要释放、已提交的修改要持久化、外部的请求要处理完成，数据的完整性不能被破坏……

后端优雅关闭需要做到什么：
对于一个

关闭容器

Go gRPC 怎么优雅关闭的

worker 怎么关闭

在 Go 语言的世界中，我们通常通过容器的方式部署我们的服务。当我们需要扩容或者更改配置的操作时就可能需要关闭容器。`docker stop` 

优雅关闭不能解决所有问题：
- 客户端如何处理失败
- 进程直接被 SIGKILL
- 数据库事物才是真正的兜底方案